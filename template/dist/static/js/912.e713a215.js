"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[912],{3912:function(t,s,o){o.r(s),o.d(s,{default:function(){return u}});var i=function(){var t=this,s=t._self._c;return t.product?s("div",[s("div",{staticClass:"product"},[s("div",{staticClass:"product-image"},[s("img",{attrs:{src:`http://127.0.0.1:8000/media/${t.product.fields.product_image}`,alt:""}})]),s("div",{staticClass:"product-info"},[s("h1",{staticClass:"product-name"},[t._v("商品id："+t._s(t.product.pk))]),s("h1",{staticClass:"product-name"},[t._v(t._s(t.product.fields.product_name))]),s("div",{staticClass:"product-cost"},[t._v("商品库存："+t._s(t.product.fields.product_stock))]),s("div",{staticClass:"product-cost"},[t._v("商品销量："+t._s(t.product.fields.product_sales))]),s("div",{staticClass:"product-cost"},[t._v("商品单价："+t._s(t.product.fields.product_cost))]),s("div",{staticClass:"product-cost"},[t._v("商品品牌："+t._s(t.product.fields.product_brand))]),s("div",{staticClass:"product-cost"},[t._v("商品颜色："+t._s(t.product.fields.product_color))]),s("div",{staticClass:"product-cost"},[t._v("商品状态："+t._s(t.product.fields.product_status))]),t.isOn?s("div",{staticClass:"product-add-cart",on:{click:t.handleAddCart}},[t._v("编辑商品")]):t._e(),t.isOn?s("div",{staticClass:"product-add-cart",on:{click:t.removePro}},[t._v("下架商品")]):t._e(),t.isOn?t._e():s("div",{staticClass:"product-add-cart",on:{click:t.handleAddCart}},[t._v("编辑并上架商品")])])]),s("div",{staticClass:"product-desc"},[s("h2",[t._v("产品介绍")]),s("img",{attrs:{src:`http://127.0.0.1:8000/media/${t.product.fields.product_imageDetail}`,alt:""}})])]):t._e()},a=[],d=(o(7658),{data(){return{id:parseInt(this.$route.params.id),product:null,product_goods:0,begood:!0,bestar:!0,shop_stars:0,isOn:!0}},methods:{async removePro(){await this.axios.get("delete_product/",{params:{product_id:this.id}}).then((t=>{console.log(t)})).catch((function(t){console.log(t)}))},async getProductLikes(){await this.axios.get("get_product_likes/",{params:{product_id:this.id}}).then((t=>{console.log(t),this.product_goods=t.data.goods})).catch((function(t){console.log(t)})),await this.axios.get("get_shop_stars/",{params:{business_id:this.product.fields.product_business}}).then((t=>{console.log(t),this.shop_stars=t.data.stars})).catch((function(t){console.log(t)}))},async changeGood(){this.begood?this.product_goods-=1:this.product_goods+=1,this.begood=!this.begood,await this.axios.get("toggle_user_like_to_product/",{params:{user_id:this.$store.state.userId,product_id:this.id}}).then((t=>{console.log(t)})).catch((function(t){console.log(t)}))},async changeStar(){this.bestar?this.shop_stars-=1:this.shop_stars+=1,this.bestar=!this.bestar,await this.axios.get("toggle_user_star_to_shop/",{params:{user_id:this.$store.state.userId,business_id:this.product.fields.product_business}}).then((t=>{console.log(t)})).catch((function(t){console.log(t)}))},async initUserToProduct(){await this.axios.get("get_user_like_to_product/",{params:{user_id:this.$store.state.userId,product_id:this.id}}).then((t=>{console.log(t),"good"===t.data.good?this.begood=!0:this.begood=!1})).catch((function(t){console.log(t)})),await this.axios.get("get_user_star_to_shop/",{params:{user_id:this.$store.state.userId,business_id:this.product.fields.product_business}}).then((t=>{console.log(t),"star"===t.data.star?this.bestar=!0:this.bestar=!1})).catch((function(t){console.log(t)}))},async getProduct(t){await this.axios.get("fetch_product/",{params:{product_id:t}}).then((t=>{console.log(t),this.product=t.data.product})).catch((function(t){console.log(t)}))},async handleAddCart(){this.$router.push({path:"/business/business_edit_commodity/"+this.id})}},async created(){await this.getProduct(this.id),"上架"==this.product.fields.product_status?this.isOn=!0:this.isOn=!1},async mounted(){await this.getProduct(this.id)}}),c=d,e=o(1001),r=(0,e.Z)(c,i,a,!1,null,"9a89d858",null),u=r.exports}}]);
//# sourceMappingURL=912.e713a215.js.map