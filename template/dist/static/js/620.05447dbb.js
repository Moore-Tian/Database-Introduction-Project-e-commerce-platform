"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[620,297],{6620:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var r=e(3423),i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"home"},[s("div",{staticClass:"header"},[t._v("头部")]),t.show?[s("div",{staticClass:"header"},[s("router-link",{staticClass:"header-title",attrs:{to:"/customerHome"}},[t._v("电商网站首页")]),s("br"),s("br"),s("div",{staticClass:"searchBox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputText,expression:"inputText"}],staticClass:"searchInput",staticStyle:{"padding-left":"10px"},attrs:{type:"text",placeholder:"请输入关键词进行搜索"},domProps:{value:t.inputText},on:{input:function(s){s.target.composing||(t.inputText=s.target.value)}}}),s("input",{staticClass:"searchButton",attrs:{type:"button",value:"搜索"},on:{click:t.Click}})]),s("div",{staticClass:"header-menu",staticStyle:{float:"right"}},[s(r.Z,{attrs:{color:"teal",size:"48"}},[s("span",{staticClass:"white--text headline"},[t._v(t._s(this.user))])])],1),s("br"),s("br"),s("customerList")],1),s("router-view")]:t._e(),s("router-view")],2)},o=[],a=(e(7658),e(2297)),l={components:{customerList:a["default"]},data(){return{user:"",inputText:"",statuss:0,image:"http://127.0.0.1:8000/media/avatar/airPods.jpg",form:{goods_image:""}}},watch:{statuss:function(){this.statuss>0&&console.log(this.$store.state.searchText)}},methods:{async Click(){""!==this.inputText?(this.$store.state.searchText=this.inputText,this.$router.push({path:"/searchOut"})):window.alert("请输入搜索内容")}},computed:{cartList(){return this.$store.state.cartList},show(){return!0}},async created(){await this.axios.get("userId2userName/",{params:{user_id:this.$store.state.userId}}).then((t=>{this.user=t.data.user_name})).catch((function(t){console.log(t)}))}},n=l,d=e(1001),c=(0,d.Z)(n,i,o,!1,null,"84008372",null),u=c.exports},2297:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var r=function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}]},[s("div",{staticClass:"list-control"},[s("div",{staticClass:"list-control-filter"},[s("span",[t._v("品牌:")]),t._l(t.brands,(function(e){return s("span",{key:e.index,staticClass:"list-control-filter-item",class:{on:e===t.filterBrand},on:{click:function(s){return t.handleFilterBrand(e)}}},[t._v(t._s(e))])}))],2),s("div",{staticClass:"list-control-filter"},[s("span",[t._v("颜色:")]),t._l(t.colors,(function(e){return s("span",{key:e.index,staticClass:"list-control-filter-item",class:{on:e===t.filterColor},on:{click:function(s){return t.handleFilterColor(e)}}},[t._v(t._s(e))])}))],2),s("div",{staticClass:"list-control-order"},[s("span",[t._v("排序:")]),s("span",{staticClass:"list-control-order-item",class:{on:""===t.order},on:{click:t.handleOrderDefault}},[t._v("默认")]),s("span",{staticClass:"list-control-order-item",class:{on:"sales"===t.order},on:{click:t.handleOrderSales}},[t._v(" 销量 "),"sales"===t.order?[t._v("↓")]:t._e()],2),s("span",{staticClass:"list-control-order-item",class:{on:t.order.indexOf("cost")>-1},on:{click:t.handleOrderCost}},[t._v(" 价格 "),"cost-desc"===t.order?[t._v("↓")]:t._e(),"cost-asc"===t.order?[t._v("↑")]:t._e()],2)])]),s("div",{staticClass:"productsList"},t._l(t.filteredAndOrderedList,(function(t){return s("Customer_Product",{key:t.fields.id,attrs:{info:t}})})),1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.filteredAndOrderedList.length,expression:"!filteredAndOrderedList.length"}],staticClass:"product-not-found"},[t._v("暂无相关商品")])])},i=[],o=e(1828),a=e(8491),l={components:{Customer_Product:o.Z},data(){return{list:[],filterBrand:"",filterColor:"",order:""}},computed:{brands(){console.log("bb22");const t=this.list.map((t=>t.fields.product_brand));return console.log("bbbbb22"),console.log(t),a.Z.getFilterArray(t)},colors(){const t=this.list.map((t=>t.fields.product_color));return a.Z.getFilterArray(t)},filteredAndOrderedList(){let t=[...this.list];return""!==this.filterBrand&&(t=t.filter((t=>t.fields.product_brand===this.filterBrand))),""!==this.filterColor&&(t=t.filter((t=>t.fields.product_color===this.filterColor))),""!==this.order&&("sales"===this.order?t=t.sort(((t,s)=>s.fields.product_sales-t.fields.product_sales)):"cost-desc"===this.order?t=t.sort(((t,s)=>s.fields.product_cost-t.fields.product_cost)):"cost-asc"===this.order&&(t=t.sort(((t,s)=>t.fields.product_cost-s.fields.product_cost)))),t}},methods:{async getProductsList(){await this.axios.get("show_customer_products/").then((t=>{console.log(t.data.list),this.list=t.data.list})).catch((function(t){console.log(t)}))},handleFilterBrand(t){this.filterBrand===t?this.filterBrand="":this.filterBrand=t},handleFilterColor(t){this.filterColor===t?this.filterColor="":this.filterColor=t},handleOrderDefault(){this.order=""},handleOrderSales(){this.order="sales"},handleOrderCost(){"cost-desc"===this.order?this.order="cost-asc":this.order="cost-desc"}},async created(){console.log("22"),await this.getProductsList(),console.log(this.list),console.log(this.list.map((t=>t.fields.product_brand))),console.log(this.list[0].pk)}},n=l,d=e(1001),c=(0,d.Z)(n,r,i,!1,null,"29f3373c",null),u=c.exports},1828:function(t,s,e){e.d(s,{Z:function(){return d}});var r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"product"},[s("router-link",{staticClass:"product-main",attrs:{to:"/product/"+t.info.pk}},[s("img",{attrs:{src:`http://127.0.0.1:8000/media/${t.info.fields.product_image}`,alt:"",height:"200px"}}),s("h4",[t._v(t._s(t.info.fields.product_name))]),s("h4",[t._v("销量"+t._s(t.info.fields.product_sales))]),s("div",{staticClass:"product-color",style:{background:t.colors[t.info.fields.product_color]}}),s("div",{staticClass:"product-cost"},[t._v("￥ "+t._s(t.info.fields.product_cost))]),s("div",{staticClass:"product-add-cart",on:{click:function(s){return s.preventDefault(),t.handleAddCart.apply(null,arguments)}}},[t._v("加入购物车")])])],1)},i=[],o={props:{info:Object},data(){return{colors:{"白色":"#ffffff","黑色":"#100f0f","灰色":"#a39f9f","金色":"#dac272","蓝色":"#233472","红色":"#f2352e"},product_goods:0,begood:!0}},methods:{async handleAddCart(){await this.axios.get("add_to_cart/",{params:{user_id:this.$store.state.userId,product_id:this.info.pk}}).then((t=>{console.log(t),window.alert("添加成功")})).catch((function(t){console.log(t)}))}}},a=o,l=e(1001),n=(0,l.Z)(a,r,i,!1,null,"54f023da",null),d=n.exports},3423:function(t,s,e){e.d(s,{Z:function(){return n}});var r=e(6878),i=e(8846),o=e(2637),a=e(5352),l=e(7678),n=(0,l.Z)(r.Z,i.Z,o.Z).extend({name:"v-avatar",props:{left:Boolean,right:Boolean,size:{type:[Number,String],default:48}},computed:{classes(){return{"v-avatar--left":this.left,"v-avatar--right":this.right,...this.roundedClasses}},styles(){return{height:(0,a.kb)(this.size),minWidth:(0,a.kb)(this.size),width:(0,a.kb)(this.size),...this.measurableStyles}}},render(t){const s={staticClass:"v-avatar",class:this.classes,style:this.styles,on:this.$listeners};return t("div",this.setBackgroundColor(this.color,s),this.$slots.default)}})},6878:function(t,s,e){var r=e(144),i=e(4101),o=e(937);s["Z"]=r["default"].extend({name:"colorable",props:{color:String},methods:{setBackgroundColor(t,s={}){return"string"===typeof s.style?((0,i.N6)("style must be an object",this),s):"string"===typeof s.class?((0,i.N6)("class must be an object",this),s):((0,o.NA)(t)?s.style={...s.style,"background-color":`${t}`,"border-color":`${t}`}:t&&(s.class={...s.class,[t]:!0}),s)},setTextColor(t,s={}){if("string"===typeof s.style)return(0,i.N6)("style must be an object",this),s;if("string"===typeof s.class)return(0,i.N6)("class must be an object",this),s;if((0,o.NA)(t))s.style={...s.style,color:`${t}`,"caret-color":`${t}`};else if(t){const[e,r]=t.toString().trim().split(" ",2);s.class={...s.class,[e+"--text"]:!0},r&&(s.class["text--"+r]=!0)}return s}}})},8846:function(t,s,e){var r=e(5352),i=e(144);s["Z"]=i["default"].extend({name:"measurable",props:{height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},computed:{measurableStyles(){const t={},s=(0,r.kb)(this.height),e=(0,r.kb)(this.minHeight),i=(0,r.kb)(this.minWidth),o=(0,r.kb)(this.maxHeight),a=(0,r.kb)(this.maxWidth),l=(0,r.kb)(this.width);return s&&(t.height=s),e&&(t.minHeight=e),i&&(t.minWidth=i),o&&(t.maxHeight=o),a&&(t.maxWidth=a),l&&(t.width=l),t}}})},2637:function(t,s,e){e(7658);var r=e(144);s["Z"]=r["default"].extend({name:"roundable",props:{rounded:[Boolean,String],tile:Boolean},computed:{roundedClasses(){const t=[],s="string"===typeof this.rounded?String(this.rounded):!0===this.rounded;if(this.tile)t.push("rounded-0");else if("string"===typeof s){const e=s.split(" ");for(const s of e)t.push(`rounded-${s}`)}else s&&t.push("rounded");return t.length>0?{[t.join(" ")]:!0}:{}}}})}}]);
//# sourceMappingURL=620.05447dbb.js.map