{"ast":null,"code":"//导入商品简介组件\nimport Customer_Product from './customer_product.vue';\nimport util from \"@/components/customer/util\";\nexport default {\n  components: {\n    Customer_Product\n  },\n  data() {\n    return {\n      list: [],\n      //品牌过滤\n      filterBrand: '',\n      //颜色过滤\n      filterColor: '',\n      //排序依据，可选值：\n      //cost-desc价格降序\n      //cost-asc价格升序\n      //sales销量\n      order: ''\n    };\n  },\n  computed: {\n    brands() {\n      //return this.$store.getters.brands;\n      console.log(\"bb22\");\n      const brands = this.list.map(item => item.fields.product_brand);\n      console.log(\"bbbbb22\");\n      console.log(brands);\n      return util.getFilterArray(brands);\n    },\n    colors() {\n      const colors = this.list.map(item => item.fields.product_color);\n      return util.getFilterArray(colors);\n    },\n    filteredAndOrderedList() {\n      //拷贝原数组\n      let list = [...this.list];\n      //品牌过滤\n      if (this.filterBrand !== '') {\n        list = list.filter(item => item.fields.product_brand === this.filterBrand);\n      }\n      //颜色过滤\n      if (this.filterColor !== '') {\n        list = list.filter(item => item.fields.product_color === this.filterColor);\n      }\n      //排序\n      if (this.order !== '') {\n        if (this.order === 'sales') {\n          list = list.sort((a, b) => b.fields.product_sales - a.fields.product_sales);\n        } else if (this.order === 'cost-desc') {\n          list = list.sort((a, b) => b.fields.product_cost - a.fields.product_cost);\n        } else if (this.order === 'cost-asc') {\n          list = list.sort((a, b) => a.fields.product_cost - b.fields.product_cost);\n        }\n      }\n      return list;\n    }\n  },\n  methods: {\n    async getProductsList() {\n      //从Vuex获取商品列表信息\n      //return this.$store.state.productList;\n      await this.axios.get('show_customer_products/').then(response => {\n        console.log(response.data.list);\n        this.list = response.data.list;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //品牌筛选\n    handleFilterBrand(brand) {\n      //点击品牌过滤，再次点击取消\n      if (this.filterBrand === brand) {\n        this.filterBrand = '';\n      } else {\n        this.filterBrand = brand;\n      }\n    },\n    //颜色筛选\n    handleFilterColor(color) {\n      //点击颜色过滤，再次点击取消\n      if (this.filterColor === color) {\n        this.filterColor = '';\n      } else {\n        this.filterColor = color;\n      }\n    },\n    handleOrderDefault() {\n      this.order = '';\n    },\n    handleOrderSales() {\n      this.order = 'sales';\n    },\n    handleOrderCost() {\n      //当点击升序时将箭头更新↓,降序设置为↑\n      if (this.order === 'cost-desc') {\n        this.order = 'cost-asc';\n      } else {\n        this.order = 'cost-desc';\n      }\n    }\n  },\n  async created() {\n    //初始化时通过Vuex actions获取商品列表信息\n    console.log(\"22\");\n    await this.getProductsList();\n    console.log(this.list);\n    console.log(this.list.map(item => item.fields.product_brand));\n    console.log(this.list[0].pk);\n  }\n};","map":{"version":3,"mappings":"AAkDA;AACA;AACA;AACA;EACAA;IAAAC;EAAA;EAEAC;IACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACA;MACA;MACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACAC;MACA;MACAA;MACAA;MACA;IAEA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACAR;MACA;MACA;MACA;QACAA;MACA;MACA;MACA;QACA;UACAA;QACA;UACAA;QACA;UACAA;QACA;MACA;MACA;IACA;EACA;EACAS;IACA;MACA;MACA;MACA,gDACAC;QACAJ;QACA;MACA,GACAK;QACAL;MACA;IACA;IAEA;IACAM;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;EAEA;EAEA;IACA;IACAV;IACA;IACAA;IACAA;IACAA;EACA;AACA","names":["components","Customer_Product","data","list","filterBrand","filterColor","order","computed","brands","console","colors","filteredAndOrderedList","methods","then","catch","handleFilterBrand","handleFilterColor","handleOrderDefault","handleOrderSales","handleOrderCost"],"sourceRoot":"src/components/customer","sources":["customer_list.vue"],"sourcesContent":["<template>\n  <div v-show=\"list.length\">\n\n    <div class=\"list-control\">\n      <div class=\"list-control-filter\">\n        <span>品牌:</span>\n        <span class=\"list-control-filter-item\"\n              :class=\"{on: item === filterBrand}\"\n              v-for=\"item in brands\" :key=\"item.index\"\n              @click=\"handleFilterBrand(item)\" >{{item}}</span>\n      </div>\n      <div class=\"list-control-filter\">\n        <span>颜色:</span>\n        <span class=\"list-control-filter-item\"\n              :class=\"{on: item === filterColor}\"\n              v-for=\"item in colors\" :key=\"item.index\"\n              @click=\"handleFilterColor(item)\">{{item}}</span>\n      </div>\n\n      <div class=\"list-control-order\">\n        <span>排序:</span>\n        <span class=\"list-control-order-item\"\n              :class=\"{on: order === ''}\"\n              @click=\"handleOrderDefault\">默认</span>\n        <span class=\"list-control-order-item\"\n              :class=\"{on: order === 'sales'}\"\n              @click=\"handleOrderSales\">\n                    销量\n                    <template v-if=\"order === 'sales'\">↓</template>\n                </span>\n        <span class=\"list-control-order-item\"\n              :class=\"{on: order.indexOf('cost') > -1}\"\n              @click=\"handleOrderCost\">\n                    价格\n                    <template v-if=\"order === 'cost-desc'\">↓</template>\n                    <template v-if=\"order === 'cost-asc'\">↑</template>\n                </span>\n      </div>\n    </div>\n    <div class=\"productsList\">\n      <Customer_Product v-for=\"item in filteredAndOrderedList\" :info=\"item\" :key=\"item.fields.id\"></Customer_Product>\n    </div>\n    <div class=\"product-not-found\"\n         v-show=\"!filteredAndOrderedList.length\">暂无相关商品</div>\n  </div>\n\n\n</template>\n\n<script>\n//导入商品简介组件\nimport Customer_Product from './customer_product.vue';\nimport util from \"@/components/customer/util\";\nexport default {\n  components: {Customer_Product},\n\n  data(){\n    return {\n      list:[],\n      //品牌过滤\n      filterBrand: '',\n      //颜色过滤\n      filterColor: '',\n      //排序依据，可选值：\n      //cost-desc价格降序\n      //cost-asc价格升序\n      //sales销量\n      order: ''\n    }\n  },\n  computed:{\n    brands(){\n      //return this.$store.getters.brands;\n      console.log(\"bb22\");\n      const brands = this.list.map(item => item.fields.product_brand);\n      console.log(\"bbbbb22\");\n      console.log(brands);\n      return util.getFilterArray(brands);\n\n    },\n    colors(){\n      const colors = this.list.map(item => item.fields.product_color);\n      return util.getFilterArray(colors);\n    },\n    filteredAndOrderedList(){\n      //拷贝原数组\n      let list = [...this.list];\n      //品牌过滤\n      if(this.filterBrand !== ''){\n        list = list.filter(item => item.fields.product_brand === this.filterBrand);\n      }\n      //颜色过滤\n      if(this.filterColor !== ''){\n        list = list.filter(item => item.fields.product_color === this.filterColor);\n      }\n      //排序\n      if(this.order !== ''){\n        if(this.order === 'sales'){\n          list = list.sort((a, b) => b.fields.product_sales - a.fields.product_sales);\n        }else if(this.order === 'cost-desc'){\n          list = list.sort((a, b) => b.fields.product_cost - a.fields.product_cost);\n        }else if(this.order === 'cost-asc'){\n          list = list.sort((a, b) => a.fields.product_cost - b.fields.product_cost);\n        }\n      }\n      return list;\n    }\n  },\n  methods: {\n    async getProductsList(){\n      //从Vuex获取商品列表信息\n      //return this.$store.state.productList;\n      await this.axios.get('show_customer_products/')\n        .then((response) => {\n            console.log(response.data.list);\n            this.list = response.data.list\n        })\n        .catch(function (error) {\n            console.log(error);\n        });\n    },\n\n    //品牌筛选\n    handleFilterBrand(brand){\n      //点击品牌过滤，再次点击取消\n      if (this.filterBrand === brand) {\n        this.filterBrand = '';\n      }else{\n        this.filterBrand = brand;\n      }\n    },\n    //颜色筛选\n    handleFilterColor(color){\n      //点击颜色过滤，再次点击取消\n      if (this.filterColor === color) {\n        this.filterColor = '';\n      }else{\n        this.filterColor = color;\n      }\n    },\n    handleOrderDefault(){\n      this.order = '';\n    },\n    handleOrderSales(){\n      this.order = 'sales';\n    },\n    handleOrderCost(){\n      //当点击升序时将箭头更新↓,降序设置为↑\n      if(this.order === 'cost-desc'){\n        this.order = 'cost-asc';\n      }else{\n        this.order = 'cost-desc';\n      }\n    },\n\n  },\n\n  async created(){\n    //初始化时通过Vuex actions获取商品列表信息\n    console.log(\"22\");\n    await this.getProductsList()\n    console.log(this.list);\n    console.log(this.list.map(item => item.fields.product_brand))\n    console.log(this.list[0].pk)\n  }\n}\n</script>\n\n<style scoped>\n/* General Styling */\nbody {\n  margin: 0;\n  font-family: Arial, sans-serif;\n  background-color: #fff0f5; /* Light pink background */\n}\n\n.container {\n  width: 500px;\n  margin: 50px auto;\n  overflow: hidden;\n  border: 1px solid #ffb6c1; /* Light pink border */\n  border-radius: 10px;\n  background-color: #fff; /* White background */\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n}\n\n/* Search Bar Styling */\n.bar1 {\n  background: #ff69b4; /* Pink background */\n  padding: 10px;\n  border-radius: 5px;\n}\n\n.bar1 input {\n  border: 2px solid #ffb6c1; /* Light pink border */\n  border-radius: 5px 0 0 5px;\n  background: #fff; /* White background */\n  color: #ff69b4; /* Pink text color */\n  padding: 8px;\n  width: 80%;\n  box-sizing: border-box;\n}\n\n.bar1 button {\n  background: #ffb6c1; /* Light pink background */\n  border: none;\n  border-radius: 0 5px 5px 0;\n  color: #fff; /* White text color */\n  padding: 8px;\n  cursor: pointer;\n}\n\n.bar1 button:before {\n  font-family: FontAwesome, serif;\n  font-size: 16px;\n  color: #fff; /* White text color */\n}\n\n/* List Control Styling */\n.list-control {\n  background: #fff; /* White background */\n  border-radius: 6px;\n  margin: 16px 0;\n  padding: 16px;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\n}\n\n.list-control-filter {\n  margin-bottom: 16px;\n}\n\n.list-control-filter-item,\n.list-control-order-item {\n  cursor: pointer;\n  display: inline-block;\n  border: 1px solid #ffb6c1; /* Light pink border */\n  border-radius: 4px;\n  margin-right: 6px;\n  padding: 2px 6px;\n  color: #ff69b4; /* Pink text color */\n  background-color: #fff; /* White background */\n}\n\n.list-control-filter-item.on,\n.list-control-order-item.on {\n  background: #ff69b4; /* Pink background */\n  border: 1px solid #ff69b4; /* Pink border */\n  color: #fff; /* White text color */\n}\n\n/* Product Not Found Styling */\n.product-not-found {\n  text-align: center;\n  padding: 32px;\n  color: #ff69b4; /* Pink text color */\n}\n\n/* Like Section Styling */\n.like {\n  width: 1000px;\n  margin: 50px auto;\n  overflow: hidden;\n  border: 1px solid #ffb6c1; /* Light pink border */\n  border-radius: 10px;\n  background-color: #fff; /* White background */\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n}\n\n.likeItem {\n  display: inline-block;\n  width: 200px;\n  height: 200px;\n  margin: 10px;\n  background-color: #fff0f5; /* Light pink background */\n  border: 1px solid #ffb6c1; /* Light pink border */\n  border-radius: 10px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}