{"ast":null,"code":"import { required } from \"@/utils/widget\";\nexport default {\n  name: \"business_add_commodity\",\n  data() {\n    return {\n      id: parseInt(this.$route.params.id),\n      cost: \"\",\n      stock: \"\",\n      intRule: [required(\"增加库存\"), function (v) {\n        return /^[1-9]{1}\\d*$/.test(v) || `库存为整数`;\n      }],\n      costRule: [required(\"单件进价\"), function (v) {\n        return /^(([1-9]{1}\\d*)|(0{1}))(\\.\\d{1,2})?$/.test(v) || `金额最多两位小数`;\n      }]\n    };\n  },\n  methods: {\n    // TODO：保存商品信息\n    async saveStock() {\n      await this.axios.get('add_product_stock/', {\n        params: {\n          product_id: this.id,\n          stock: this.stock,\n          cost: this.cost\n        }\n      }).then(response => {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n      window.alert(\"库存添加成功\");\n      window.location.href = '/#/business/commodity';\n    }\n  }\n};","map":{"version":3,"mappings":"AAuEA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC,4BACA;QACA;MACA,EACA;MACAC,6BACA;QACA;MACA;IAGA;EACA;EAEAC;IACA;IACA;MACA,2CACA;QAAAC;UAAAC;UAAAL;UAAAD;QAAA;MAAA,GACAO;QACAC;MAEA,GACAC;QACAD;MAEA;MACAE;MAEAA;IACA;EAGA;AACA","names":["name","data","id","cost","stock","intRule","costRule","methods","params","product_id","then","console","catch","window"],"sourceRoot":"src/components/business","sources":["edit_commodity_stock.vue"],"sourcesContent":["<template>\r\n  <div class=\"py-2 px-2 height-100pc user-center\" elevation=\"1\">\r\n    <v-row no-gutters justify=\"space-between\">\r\n      <v-col class=\"ml-3\">\r\n        <v-toolbar\r\n            dark\r\n            color=\"blue darken-3\"\r\n            class=\"mb-1\"\r\n        >\r\n          <v-spacer></v-spacer>\r\n          <v-toolbar-title>\r\n            <h4>增加库存</h4>\r\n          </v-toolbar-title>\r\n          <v-spacer></v-spacer>\r\n        </v-toolbar>\r\n        <v-card>\r\n          <v-card flat class=\"pa-3\">\r\n            <v-row>\r\n              <v-col md=\"6\">\r\n                <v-form ref=\"form\">\r\n                  <!-- 字段渲染 -->\r\n                  <v-container>\r\n                    <v-row>\r\n                      <v-col md=\"12\">\r\n                        <v-text-field\r\n                            label=\"补充库存量\"\r\n                            :rules=\"intRule\"\r\n                            v-model=\"stock\"\r\n                            clearable\r\n                        />\r\n                      </v-col>\r\n                    </v-row>\r\n                    <v-row>\r\n                      <v-col md=\"12\">\r\n                        <v-text-field\r\n                            label=\"单件进价\"\r\n                            :rules=\"costRule\"\r\n                            v-model=\"cost\"\r\n                            clearable\r\n                        />\r\n                      </v-col>\r\n                    </v-row>\r\n\r\n                  </v-container>\r\n                </v-form>\r\n              </v-col>\r\n\r\n            </v-row>\r\n            <v-divider/>\r\n            <v-row justify=\"end\">\r\n              <v-col md=\"4\" align=\"end\">\r\n                <v-btn\r\n                    small\r\n                    tile\r\n                    class=\"mr-2\"\r\n                    color=\"primary\"\r\n                    @click=\"saveStock\"\r\n                >\r\n                  添加\r\n                </v-btn>\r\n              </v-col>\r\n            </v-row>\r\n          </v-card>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport {required} from \"@/utils/widget\";\r\n\r\nexport default {\r\n  name: \"business_add_commodity\",\r\n  data() {\r\n    return {\r\n      id: parseInt(this.$route.params.id),\r\n      cost:\"\",\r\n      stock:\"\",\r\n      intRule: [required(\"增加库存\"),\r\n          function (v) {\r\n            return  /^[1-9]{1}\\d*$/.test(v) || `库存为整数`;\r\n          }\r\n      ],\r\n      costRule:[required(\"单件进价\"),\r\n          function (v) {\r\n            return  /^(([1-9]{1}\\d*)|(0{1}))(\\.\\d{1,2})?$/.test(v) || `金额最多两位小数`;\r\n          }\r\n      ]\r\n\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // TODO：保存商品信息\r\n    async saveStock() {\r\n      await this.axios.get('add_product_stock/',\r\n          {params:{product_id: this.id,stock:this.stock,cost:this.cost}})\r\n        .then((response) => {\r\n            console.log(response);\r\n\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n\r\n        });\r\n      window.alert(\"库存添加成功\")\r\n\r\n      window.location.href = '/#/business/commodity';\r\n    },\r\n\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}