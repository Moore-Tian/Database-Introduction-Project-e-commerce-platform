{"ast":null,"code":"import { RegionText } from \"v-region\";\nexport default {\n  components: {\n    RegionText\n  },\n  data() {\n    return {\n      itemsPerPageArray: [12],\n      search: '',\n      page: 1,\n      itemsPerPage: 12,\n      business_lists: [],\n      num: 0\n    };\n  },\n  computed: {\n    numberOfPages() {\n      return Math.ceil(this.business_lists.length / this.itemsPerPage);\n    }\n  },\n  methods: {\n    nextPage() {\n      if (this.page + 1 <= this.numberOfPages) this.page += 1;\n    },\n    formerPage() {\n      if (this.page - 1 >= 1) this.page -= 1;\n    },\n    updateItemsPerPage(number) {\n      this.itemsPerPage = number;\n    }\n  },\n  async created() {\n    await this.axios.get('get_user_action_log/', {\n      params: {}\n    }).then(response => {\n      console.log(response);\n      this.business_lists = response.data.list;\n      this.business_lists.forEach(item => {\n        item.fields['region'] = {\n          province: item.fields.action_province,\n          city: item.fields.action_city,\n          area: item.fields.action_area,\n          town: ''\n        };\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    await this.axios.get('get_user_action_num/', {\n      params: {}\n    }).then(response => {\n      console.log(response);\n      this.num = response.data.num;\n      this.business_lists.forEach(item => {\n        item.fields['region'] = {\n          province: item.fields.action_province,\n          city: item.fields.action_city,\n          area: item.fields.action_area,\n          town: ''\n        };\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n};","map":{"version":3,"mappings":"AAmIA;AAEA;EACAA;IAEAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MAIAC;MACAC;IAEA;EACA;EACAC;IACAC;MACA;IACA;EAGA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EAAA;EACA;IACA,6CACA;MAAAC;IAAA,GACAC;MACAC;MACA;MAEA;QACAC;UACAC;UACAC;UACAC;UACAC;QACA;MAAA;IACA,GACAC;MACAN;IACA;IAEA,6CACA;MAAAF;IAAA,GACAC;MACAC;MACA;MAEA;QACAC;UACAC;UACAC;UACAC;UACAC;QACA;MAAA;IACA,GACAC;MACAN;IACA;EACA;AACA","names":["components","RegionText","data","itemsPerPageArray","search","page","itemsPerPage","business_lists","num","computed","numberOfPages","methods","nextPage","formerPage","updateItemsPerPage","params","then","console","item","province","city","area","town","catch"],"sourceRoot":"src/view/manager","sources":["page_user_action.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n    <v-container fluid>\r\n      <v-data-iterator\r\n          :items=\"business_lists\"\r\n          :items-per-page.sync=\"itemsPerPage\"\r\n          :page=\"page\"\r\n          :search=\"search\"\r\n          hide-default-footer\r\n      >\r\n        <template v-slot:header>\r\n          <v-toolbar\r\n              dark\r\n              color=\"blue darken-3\"\r\n              class=\"mb-1\"\r\n          >\r\n            <v-spacer></v-spacer>\r\n            <v-toolbar-title>\r\n              <h4>用户操作日志{{num}}条</h4>\r\n            </v-toolbar-title>\r\n            <v-spacer></v-spacer>\r\n          </v-toolbar>\r\n        </template>\r\n\r\n        <template v-slot:default=\"props\">\r\n\r\n          <v-list-item\r\n            v-for=\"item in props.items\"\r\n            :key=\"item.pk\"\r\n        >\r\n\r\n          <v-list-item-content>\r\n            <v-row>\r\n\r\n        <v-col>\r\n          <v-list-item-title>{{ item.fields.action_name }}</v-list-item-title>\r\n        </v-col>\r\n\r\n        <v-col>\r\n          <v-list-item-title>{{ item.fields.action_type  }}</v-list-item-title>\r\n          </v-col>\r\n <v-col>\r\n          <v-list-item-title>{{ item.fields.action_time | format  }}</v-list-item-title>\r\n\r\n        </v-col>\r\n              <v-col >\r\n          <!--<v-list-item-title>{{ item.address }}</v-list-item-title>-->\r\n                <div v-if=\"item.fields.region.area!==''\">\r\n          <region-text\r\n                  separator=\"-\"\r\n                  :town=\"false\"\r\n                  v-model=\"item.fields.region\"\r\n          /></div>\r\n        </v-col>\r\n              <v-col>\r\n          <v-list-item-title>{{ item.fields.action  }}</v-list-item-title>\r\n\r\n        </v-col>\r\n\r\n              </v-row>\r\n          </v-list-item-content>\r\n\r\n        </v-list-item>\r\n        </template>\r\n\r\n        <template v-slot:footer>\r\n          <v-row class=\"mt-2\" align=\"center\" justify=\"center\">\r\n            <span class=\"grey--text\">Items per page</span>\r\n            <v-menu offset-y>\r\n              <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-btn\r\n                    dark\r\n                    text\r\n                    color=\"primary\"\r\n                    class=\"ml-2\"\r\n                    v-bind=\"attrs\"\r\n                    v-on=\"on\"\r\n                >\r\n                  {{ itemsPerPage }}\r\n                  <v-icon>mdi-chevron-down</v-icon>\r\n                </v-btn>\r\n              </template>\r\n              <v-list>\r\n                <v-list-item\r\n                    v-for=\"(number, index) in itemsPerPageArray\"\r\n                    :key=\"index\"\r\n                    @click=\"updateItemsPerPage(number)\"\r\n                >\r\n                  <v-list-item-title>{{ number }}</v-list-item-title>\r\n                </v-list-item>\r\n              </v-list>\r\n            </v-menu>\r\n\r\n            <v-spacer></v-spacer>\r\n\r\n            <span\r\n                class=\"mr-4\r\n            grey--text\"\r\n            >\r\n            Page {{ page }} of {{ numberOfPages }}\r\n          </span>\r\n            <v-btn\r\n                fab\r\n                dark\r\n                color=\"blue darken-3\"\r\n                class=\"mr-1\"\r\n                @click=\"formerPage\"\r\n            >\r\n              <v-icon>mdi-chevron-left</v-icon>\r\n            </v-btn>\r\n            <v-btn\r\n                fab\r\n                dark\r\n                color=\"blue darken-3\"\r\n                class=\"ml-1\"\r\n                @click=\"nextPage\"\r\n            >\r\n              <v-icon>mdi-chevron-right</v-icon>\r\n            </v-btn>\r\n          </v-row>\r\n        </template>\r\n      </v-data-iterator>\r\n    </v-container>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport {RegionText} from \"v-region\";\r\n\r\nexport default {\r\n    components: {\r\n\r\n    RegionText\r\n  },\r\n  data () {\r\n    return {\r\n      itemsPerPageArray: [12],\r\n      search: '',\r\n      page: 1,\r\n      itemsPerPage: 12,\r\n\r\n\r\n\r\n      business_lists:[],\r\n      num:0,\r\n\r\n    }\r\n  },\r\n  computed: {\r\n    numberOfPages () {\r\n      return Math.ceil(this.business_lists.length / this.itemsPerPage)\r\n    },\r\n\r\n\r\n  },\r\n  methods: {\r\n    nextPage () {\r\n      if (this.page + 1 <= this.numberOfPages) this.page += 1\r\n    },\r\n    formerPage () {\r\n      if (this.page - 1 >= 1) this.page -= 1\r\n    },\r\n    updateItemsPerPage (number) {\r\n      this.itemsPerPage = number\r\n    },},\r\n  async created() {\r\n    await this.axios.get('get_user_action_log/',\r\n          {params:{}})\r\n        .then((response) => {\r\n            console.log(response);\r\n            this.business_lists = response.data.list;\r\n\r\n            this.business_lists.forEach(item => {\r\n                    item.fields['region']={\r\n                      province:item.fields.action_province,\r\n                      city:item.fields.action_city,\r\n                      area:item.fields.action_area,\r\n                      town:''\r\n                    }});\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });\r\n\r\n    await this.axios.get('get_user_action_num/',\r\n          {params:{}})\r\n        .then((response) => {\r\n            console.log(response);\r\n            this.num = response.data.num;\r\n\r\n            this.business_lists.forEach(item => {\r\n                    item.fields['region']={\r\n                      province:item.fields.action_province,\r\n                      city:item.fields.action_city,\r\n                      area:item.fields.action_area,\r\n                      town:''\r\n                    }});\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });\r\n  }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}