{"ast":null,"code":"import { RegionText } from 'v-region';\nexport default {\n  name: 'order_toDelivery',\n  props: {\n    tabkey: Object\n  },\n  watch: {\n    tabkey() {\n      this.initBusinessInfo();\n    }\n  },\n  components: {\n    RegionText\n  },\n  data() {\n    return {\n      btn_content: '通过审核',\n      btn_content2: '回退申请',\n      business_orders: [],\n      orderProducts: [],\n      nowProduct: [],\n      userAvatar: [],\n      business_lists: [],\n      business_list_dict: [],\n      check_lists: [],\n      tocheck: []\n    };\n  },\n  methods: {\n    async initBusinessInfo() {\n      try {\n        const responseUsers = await this.axios.get('get_users/', {\n          params: {\n            status: '待上架'\n          }\n        });\n        this.business_lists = responseUsers.data.business_lists;\n        this.business_lists.forEach(item => {\n          this.business_list_dict[item.pk] = item;\n          this.userAvatar[item.pk] = item.fields.user_avatar;\n          item.fields['region'] = {\n            province: item.fields.user_province,\n            city: item.fields.user_city,\n            area: item.fields.user_area,\n            town: ''\n          };\n        });\n        const responseCheck = await this.axios.get('get_check/', {\n          params: {\n            product_status: '申请上架',\n            check_status: '待审核'\n          }\n        });\n        this.tocheck = responseCheck.data.list;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async changestatus(click_order_id, result) {\n      try {\n        await this.axios.get('alterCheckStatus/', {\n          params: {\n            order_id: click_order_id,\n            status: result\n          }\n        });\n        await this.initBusinessInfo();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  },\n  async created() {\n    await this.initBusinessInfo();\n  }\n};","map":{"version":3,"mappings":"AAiEA;AAEA;EACAA;EACAC;IACAC;EACA;EACAC;IACAD;MACA;IACA;EACA;EACAE;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;QACA;UAAAC;YAAAC;UAAA;QAAA;QACA;QACA;UACA;UACA;UACAC;YACAC;YACAC;YACAC;YACAC;UACA;QACA;QAEA;UAAAN;YAAAO;YAAAC;UAAA;QAAA;QACA;MACA;QACAC;MACA;IACA;IACA;MACA;QACA;UAAAT;YAAAU;YAAAT;UAAA;QAAA;QACA;MACA;QACAQ;MACA;IACA;EACA;EACA;IACA;EACA;AACA","names":["name","props","tabkey","watch","components","RegionText","data","btn_content","btn_content2","business_orders","orderProducts","nowProduct","userAvatar","business_lists","business_list_dict","check_lists","tocheck","methods","params","status","item","province","city","area","town","product_status","check_status","console","order_id"],"sourceRoot":"src/view/manager","sources":["toCheck.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <v-list-item v-for=\"item in tocheck\" :key=\"item.pk\">\r\n      <v-list-item-content>\r\n        <v-row>\r\n          <v-col class=\"product\">\r\n            <!-- 商品图像和细节照片 -->\r\n            <img class=\"picture1\" :src=\"`http://127.0.0.1:8000/media/${item.fields.product_image}`\" alt=\"\" height=\"50px\" width=\"50px\">\r\n            <img class=\"picture2\" :src=\"`http://127.0.0.1:8000/media/${item.fields.product_imageDetail}`\" alt=\"\" height=\"50px\" width=\"50px\">\r\n            <v-row>\r\n              <v-col>\r\n                <v-list-item-title>{{ item.fields.product_name }}</v-list-item-title>\r\n              </v-col>\r\n              <v-col>\r\n                <v-list-item-title>{{ item.fields.product_brand }}</v-list-item-title>\r\n              </v-col>\r\n              <v-col>\r\n                <v-list-item-title>{{ item.fields.product_cost }}</v-list-item-title>\r\n              </v-col>\r\n              <v-col>\r\n                <v-list-item-title>{{ item.fields.product_color }}</v-list-item-title>\r\n              </v-col>\r\n            </v-row>\r\n          </v-col>\r\n          <v-col class=\"saler\">\r\n            <img :src=\"`http://127.0.0.1:8000/media/${business_list_dict[item.fields.product_business].fields.user_avatar}`\" alt=\"\" height=\"50px\" width=\"50px\">\r\n            <v-row>\r\n              <v-col>\r\n                <v-list-item-title>{{ business_list_dict[item.fields.product_business].fields.user_name }}</v-list-item-title>\r\n              </v-col>\r\n              <!-- 地址 -->\r\n              <v-col>\r\n                <div v-if=\"item.fields.region.area !== ''\">\r\n                  <region-text separator=\"-\" :town=\"false\" v-model=\"business_list_dict[item.fields.product_business].fields.region\" />\r\n                </div>\r\n              </v-col>\r\n              <v-col>\r\n                <v-list-item-title>{{ business_list_dict[item.fields.product_business].fields.user_address }}</v-list-item-title>\r\n              </v-col>\r\n              <v-col>\r\n                <v-list-item-title>{{ business_list_dict[item.fields.product_business].fields.user_mobile }}</v-list-item-title>\r\n              </v-col>\r\n            </v-row>\r\n          </v-col>\r\n          <v-col class=\"status\">\r\n            <br>\r\n            <v-list-item-title>{{ item.fields.checktime | format }}</v-list-item-title>\r\n            <v-list-item-action>\r\n              <v-row>\r\n                <v-col>\r\n                  <v-btn color=\"pink darken-2\" @click=\"changestatus(item.pk, '通过审核')\">{{ btn_content }}</v-btn>\r\n                </v-col>\r\n                <v-col>\r\n                  <v-btn color=\"pink darken-2\" @click=\"changestatus(item.pk, '回退申请')\">{{ btn_content2 }}</v-btn>\r\n                </v-col>\r\n              </v-row>\r\n            </v-list-item-action>\r\n          </v-col>\r\n        </v-row>\r\n      </v-list-item-content>\r\n    </v-list-item>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { RegionText } from 'v-region';\r\n\r\nexport default {\r\n  name: 'order_toDelivery',\r\n  props: {\r\n    tabkey: Object\r\n  },\r\n  watch: {\r\n    tabkey() {\r\n      this.initBusinessInfo();\r\n    }\r\n  },\r\n  components: {\r\n    RegionText\r\n  },\r\n  data() {\r\n    return {\r\n      btn_content: '通过审核',\r\n      btn_content2: '回退申请',\r\n      business_orders: [],\r\n      orderProducts: [],\r\n      nowProduct: [],\r\n      userAvatar: [],\r\n      business_lists: [],\r\n      business_list_dict: [],\r\n      check_lists: [],\r\n      tocheck: []\r\n    };\r\n  },\r\n  methods: {\r\n    async initBusinessInfo() {\r\n      try {\r\n        const responseUsers = await this.axios.get('get_users/', { params: { status: '待上架' } });\r\n        this.business_lists = responseUsers.data.business_lists;\r\n        this.business_lists.forEach(item => {\r\n          this.business_list_dict[item.pk] = item;\r\n          this.userAvatar[item.pk] = item.fields.user_avatar;\r\n          item.fields['region'] = {\r\n            province: item.fields.user_province,\r\n            city: item.fields.user_city,\r\n            area: item.fields.user_area,\r\n            town: ''\r\n          };\r\n        });\r\n\r\n        const responseCheck = await this.axios.get('get_check/', { params: { product_status: '申请上架', check_status: '待审核' } });\r\n        this.tocheck = responseCheck.data.list;\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    async changestatus(click_order_id, result) {\r\n      try {\r\n        await this.axios.get('alterCheckStatus/', { params: { order_id: click_order_id, status: result } });\r\n        await this.initBusinessInfo();\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  },\r\n  async created() {\r\n    await this.initBusinessInfo();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.picture1 {\r\n  margin-right: 10px;\r\n}\r\n.picture2 {\r\n  margin-left: 10px;\r\n}\r\n.saler {\r\n  margin-left: 20px;\r\n  margin-right: 10px;\r\n  border-style: dashed;\r\n  border-width: 3px;\r\n  border-color: rgba(255, 192, 203, 0.5);\r\n  border-radius: 6px;\r\n  margin-bottom: 10px;\r\n}\r\n.product {\r\n  border-style: dashed;\r\n  border-width: 3px;\r\n  border-color: rgba(255, 192, 203, 0.5);\r\n  margin-right: 10px;\r\n  margin-left: 20px;\r\n  border-radius: 6px;\r\n  margin-bottom: 10px;\r\n}\r\n.status {\r\n  border-style: dashed;\r\n  border-width: 3px;\r\n  border-color: rgba(255, 192, 203, 0.5);\r\n  margin-right: 15px;\r\n  border-radius: 6px;\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}